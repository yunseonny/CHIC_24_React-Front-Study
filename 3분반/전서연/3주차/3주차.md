# Ch 01. ë¦¬ì•¡íŠ¸ ê¸°ì´ˆ (2)

3ì£¼ì°¨ 240710 ~ 240717

# ì»´í¬ë„ŒíŠ¸ ì´ë²¤íŠ¸ ë§Œë“¤ê¸°

### Subject ì»´í¬ë„ŒíŠ¸ì—ì„œ onChangePage ì´ë²¤íŠ¸ ìƒì„±í•´ alert ì‹¤í–‰ì‹œí‚¤ê¸°

Subject ì»´í¬ë„ŒíŠ¸ì—ëŠ” onChangePage ì´ë²¤íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³ , ì»´í¬ë„ŒíŠ¸ ì•ˆì˜ <a>íƒœê·¸ë¥¼ í´ë¦­í–ˆì„ ë•Œ ì´ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

![Untitled](Ch%2001%20%E1%84%85%E1%85%B5%E1%84%8B%E1%85%A2%E1%86%A8%E1%84%90%E1%85%B3%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%20(2)%207218361542944d059bfe63765ba2dbc3/Untitled.png)

```jsx
    return (
      <div className="App">
        <Subject
          title={this.state.subject.title}
          sub={this.state.subject.sub}
          onChangePage={function () {
            alert("hi~");
          }.bind(this)}
        ></Subject>
        <TOC data={this.state.content}></TOC>
        <Content title={_title} desc={_desc}></Content>
      </div>
    );
```

```jsx
import React, { Component } from "react";

class Subject extends Component {
  render() {
    console.log("Subject render");
    return (
      <header>
        <h1>
          <a
            href="/"
            onClick={function (e) {
              e.preventDefault();
              this.props.onChangePage();
            }.bind(this)}
          >
            {this.props.title}
          </a>
        </h1>
        {this.props.sub}
      </header>
    );
  }
}
export default Subject;

```

Subject ì»´í¬ë„ŒíŠ¸ì˜ ì•µì»¤ íƒœê·¸ í´ë¦­ > í•¨ìˆ˜ onChangePage ì‹¤í–‰

> ì¸ìë¡œì¨ ì´ë²¤íŠ¸ ê°ì²´ eê°€ ì „ë‹¬(preventDefault í˜¸ì¶œí•´ ì•µì»¤ íƒœê·¸ ê¸°ë³¸ ê¸°ëŠ¥ ì°¨ë‹¨)

> í•¨ìˆ˜ê°€ ì»´í¬ë„ŒíŠ¸ì˜ onChangePageë¡œ ì „ë‹¬

### onChange í•¨ìˆ˜ì—ì„œ state ê°’ ë³€ê²½í•˜ê¸°

í•¨ìˆ˜ì˜ ë‚´ìš©ì„ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½

```jsx
return (
      <div className="App">
        <Subject
          title={this.state.subject.title}
          sub={this.state.subject.sub}
          onChangePage={function () {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "welcome" });
          }.bind(this)}
        ></Subject>
        <TOC data={this.state.content}></TOC>
        <Content title={_title} desc={_desc}></Content>
      </div>
    );
```

ë‹¤ìŒê³¼ ê°™ì´ <a> íƒœê·¸ë¥¼ í´ë¦­í•˜ë©´ state ê°’ì´ ë³€í™”ë˜ì–´ ì›¹ í˜ì´ì§€ í‘œì‹œ ë‚´ìš©ì´ ë‹¬ë¼ì§„ë‹¤.

![Untitled](Ch%2001%20%E1%84%85%E1%85%B5%E1%84%8B%E1%85%A2%E1%86%A8%E1%84%90%E1%85%B3%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%20(2)%207218361542944d059bfe63765ba2dbc3/Untitled%201.png)

---

### TOC <a> íƒœê·¸ë¥¼ í´ë¦­í–ˆì„ ë•Œ alert í•¨ìˆ˜ ì‹¤í–‰í•˜ê¸°

App ì»´í¬ë„ŒíŠ¸ì˜ TOC ì»´í¬ë„ŒíŠ¸ ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •

[<TOC
  data={this.state.content}
  onChangePage={function () {
    // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
    alert("hi~~");
  }.bind(this)}
></TOC>](https://www.notion.so/TOC-data-this-state-content-onChangePage-function-alert-hi--8593720409904c51ae37f0c5629b41ef?pvs=21)

![Untitled](Ch%2001%20%E1%84%85%E1%85%B5%E1%84%8B%E1%85%A2%E1%86%A8%E1%84%90%E1%85%B3%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%20(2)%207218361542944d059bfe63765ba2dbc3/Untitled%202.png)

TOC ì»´í¬ë„ŒíŠ¸ì˜ onChangePage propsì— ê²½ê³ ì°½ì„ ë„ìš°ëŠ” alert í•¨ìˆ˜ê°€ ì „ë‹¬ëœë‹¤. 

TOC ì»´í¬ë„ŒíŠ¸ì—ì„œ onChangePageë¼ëŠ” propsë¥¼ ë°›ì•„ì•¼ í•˜ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œ ì‘ì„±

```jsx
import React, { Component } from "react";

class TOC extends Component {
  render() {
    console.log("TOC render");
    var lists = [];
    var data = this.props.data;
    var i = 0;
    while (i < data.length) {
      lists.push(
        <li key={data[i].id}>
          <a
            href={"/content/" + data[i].id}
            onClick={function (e) {
              e.preventDefault();
              this.props.onChangePage();
            }.bind(this)}
          >
            {data[i].title}
          </a>
        </li>
      );
      i = i + 1;
    }
    return (
      <nav>
        <ul>{lists}</ul>
      </nav>
    );
  }
}

export default TOC;

```

### TOC <a> íƒœê·¸ë¥¼ í´ë¦­í–ˆì„ ë•Œ state ê°’ ë³€ê²½í•˜ê¸°

alert í•¨ìˆ˜ë¥¼ setState í•¨ìˆ˜ë¡œ ë³€ê²½

```jsx
        <TOC
          data={this.state.content}
          onChangePage={function () {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "read" });
          }.bind(this)}
        ></TOC>
```

### ê¸€ ëª©ë¡ì—ì„œ í´ë¦­í•œ ì½˜í…ì¸ ê°€ ë³¸ë¬¸ì— í‘œì‹œë˜ë„ë¡ í•˜ê¸°

```jsx
return (
      <div className="App">
        <Subject
          title={this.state.subject.title}
          sub={this.state.subject.sub}
          onChangePage={function () {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "welcome" });
          }.bind(this)}
        ></Subject>
        <TOC
          data={this.state.content}
          onChangePage={function (id) {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "read", selected_content_id: Number(id) });
          }.bind(this)}
        ></TOC>
        <Content title={_title} desc={_desc}></Content>
      </div>
    );
```

```jsx
import React, { Component } from "react";

class TOC extends Component {
  render() {
    console.log("TOC render");
    var lists = [];
    var data = this.props.data;
    var i = 0;
    while (i < data.length) {
      lists.push(
        <li key={data[i].id}>
          <a
            href={"/content/" + data[i].id}
            data-id={data[i].id}
            onClick={function (e) {
              e.preventDefault();
              this.props.onChangePage(e.target.dataset.id);
            }.bind(this)}
          >
            {data[i].title}
          </a>
        </li>
      );
      i = i + 1;
    }
    return (
      <nav>
        <ul>{lists}</ul>
      </nav>
    );
  }
}

export default TOC;

```

<aside>
ğŸ“š **ì •ë¦¬**

1. propsì™€ stateì˜ ì°¨ì´
: ì™¸ë¶€(ìƒìœ„ ì»´í¬ë„ŒíŠ¸)ì—ì„œ propsë¥¼ í†µí•´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•˜ëŠ” ë°˜ë©´, stateëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤. propsëŠ” ì½ê¸° ì „ìš©ì´ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìˆ˜ì •í•  ìˆ˜ ì—†ì§€ë§Œ, stateëŠ” setState í•¨ìˆ˜ë¥¼ í†µí•´ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤. 

![Untitled](Ch%2001%20%E1%84%85%E1%85%B5%E1%84%8B%E1%85%A2%E1%86%A8%E1%84%90%E1%85%B3%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%20(2)%207218361542944d059bfe63765ba2dbc3/Untitled%203.png)

1. event
: propsë¥¼ í†µí•´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ëª…ë ¹ì´ ì´ë£¨ì–´ì§€ëŠ” ê²ƒê³¼ ìœ ì‚¬í•˜ê²Œ, í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ê°€ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— ëª…ë ¹í•  ë•Œì—ëŠ” ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì˜ state ê°’ì„ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ stateë¥¼ ë³€í™”ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
</aside>

# Create êµ¬í˜„

Reactì˜ CRUD ì¤‘ Createë¥¼ êµ¬í˜„í•´ë³´ì.

![Untitled](Ch%2001%20%E1%84%85%E1%85%B5%E1%84%8B%E1%85%A2%E1%86%A8%E1%84%90%E1%85%B3%20%E1%84%80%E1%85%B5%E1%84%8E%E1%85%A9%20(2)%207218361542944d059bfe63765ba2dbc3/Untitled%204.png)

### ëª¨ë“œ ë³€ê²½ ê¸°ëŠ¥

ì•„ë˜ì™€ ê°™ì´ Control ì»´í¬ë„ŒíŠ¸ ì¶”ê°€

```jsx
    return (
      <div className="App">
        <Subject
          title={this.state.subject.title}
          sub={this.state.subject.sub}
          onChangePage={function () {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "welcome" });
          }.bind(this)}
        ></Subject>
        <TOC
          data={this.state.content}
          onChangePage={function (id) {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "read", selected_content_id: Number(id) });
          }.bind(this)}
        ></TOC>
        <Control
          onChangeMode={function (_mode) {
            this.setState({ mode: _mode });
          }.bind(this)}
        ></Control>
        <Content title={_title} desc={_desc}></Content>
      </div>
    );
```

```jsx
import React, { Component } from "react";

class Content extends Component {
  render() {
    console.log("Content render");
    return (
      <ul>
        <li>
          <a
            href="/create"
            onClick={function (e) {
              e.preventDefault();
              this.props.onChangeMode("create");
            }.bind(this)}
          >
            create
          </a>
        </li>
        <li>
          <a
            href="/update"
            onClick={function (e) {
              e.preventDefault();
              this.props.onChangeMode("update");
            }.bind(this)}
          >
            update
          </a>
        </li>
        <li>
          <input type="button" value="delete"></input>
        </li>
      </ul>
    );
  }
}
export default Content;
```

### Create ê¸°ëŠ¥ êµ¬í˜„

```jsx
import "./App.css";
import TOC from "./components/TOC";
import ReadContent from "./components/ReadContent";
import CreateContent from "./components/CreateContent";
import Subject from "./components/Subject";
import { Component } from "react";
import Control from "./components/Control";

class App extends Component {
  constructor(props) {
    super(props);
    this.max_content_id = 3;
    this.state = {
      mode: "read",
      selected_content_id: 2,
      subject: { title: "WEB", sub: "World Wide Web" },
      welcome: { title: "Welcome", desc: "HELLO REACT!!" },
      content: [
        {
          id: 1,
          title: "html",
          desc: "ì €ëŠ” HTMLë¡œ ì½”ë”©í•´ìš”",
        },
        {
          id: 2,
          title: "css",
          desc: "ì €ëŠ” CSSë¡œ í˜ì´ì§€ ê¾¸ë©°ìš”",
        },
        {
          id: 3,
          title: "js",
          desc: "ì €ëŠ” JSë¡œ í˜ì´ì§€ë¥¼ ì›€ì§ì—¬ìš”",
        },
      ],
    };
  }

  render() {
    console.log("App render");
    var _title,
      _desc,
      _article = null;
    if (this.state.mode === "welcome") {
      _title = this.state.welcome.title;
      _desc = this.state.welcome.desc;
      _article = <ReadContent title={_title} desc={_desc}></ReadContent>;
    } else if (this.state.mode === "read") {
      var i = 0;
      while (i < this.state.content.length) {
        var data = this.state.content[i];
        if (data.id === this.state.selected_content_id) {
          _title = data.title;
          _desc = data.desc;
          break;
        }
        i = i + 1;
      }
      _article = <ReadContent title={_title} desc={_desc}></ReadContent>;
    } else if (this.state.mode === "create") {
      _article = (
        <CreateContent
          onSubmit={function (_title, _desc) {
            this.max_content_id = this.max_content_id + 1;
            var _content = this.state.content.concat({
              id: this.max_content_id,
              title: _title,
              desc: _desc,
            });

            this.setState({
              content: _content,
            });
          }.bind(this)}
        ></CreateContent>
      );
    }

    return (
      <div className="App">
        <Subject
          title={this.state.subject.title}
          sub={this.state.subject.sub}
          onChangePage={function () {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "welcome" });
          }.bind(this)}
        ></Subject>
        <TOC
          data={this.state.content}
          onChangePage={function (id) {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "read", selected_content_id: Number(id) });
          }.bind(this)}
        ></TOC>
        <Control
          onChangeMode={function (_mode) {
            this.setState({ mode: _mode });
          }.bind(this)}
        ></Control>
        {_article}
      </div>
    );
  }
}

export default App;

```

```jsx
import React, { Component } from "react";

class CreateContent extends Component {
  render() {
    console.log("Content render");
    return (
      <article>
        <h2>Create</h2>
        <form
          action="/create_process"
          method="post"
          onSubmit={function (e) {
            e.preventDefault();
            this.props.onSubmit(e.target.title.value, e.target.desc.value);
            alert("submit");
          }.bind(this)}
        >
          <p>
            <input type="text" name="title" placeholder="title"></input>
          </p>
          <p>
            <textarea name="desc" placeholder="description"></textarea>
          </p>
          <p>
            <input type="submit"></input>
          </p>
        </form>
      </article>
    );
  }
}
export default CreateContent;

```

## Update ê¸°ëŠ¥ êµ¬í˜„

```jsx
import "./App.css";
import TOC from "./components/TOC";
import ReadContent from "./components/ReadContent";
import CreateContent from "./components/CreateContent";
import UpdateContent from "./components/UpdateContent";
import Subject from "./components/Subject";
import { Component } from "react";
import Control from "./components/Control";

class App extends Component {
  constructor(props) {
    super(props);
    this.max_content_id = 3;
    this.state = {
      mode: "read",
      selected_content_id: 2,
      subject: { title: "WEB", sub: "World Wide Web" },
      welcome: { title: "Welcome", desc: "HELLO REACT!!" },
      content: [
        {
          id: 1,
          title: "html",
          desc: "ì €ëŠ” HTMLë¡œ ì½”ë”©í•´ìš”",
        },
        {
          id: 2,
          title: "css",
          desc: "ì €ëŠ” CSSë¡œ í˜ì´ì§€ ê¾¸ë©°ìš”",
        },
        {
          id: 3,
          title: "js",
          desc: "ì €ëŠ” JSë¡œ í˜ì´ì§€ë¥¼ ì›€ì§ì—¬ìš”",
        },
      ],
    };
  }
  getReadContent() {
    var i = 0;
    while (i < this.state.content.length) {
      var data = this.state.content[i];
      if (data.id === this.state.selected_content_id) {
        return data;
      }
      i = i + 1;
    }
  }
  getContent() {
    var _title,
      _desc,
      _article = null;
    if (this.state.mode === "welcome") {
      _title = this.state.welcome.title;
      _desc = this.state.welcome.desc;
      _article = <ReadContent title={_title} desc={_desc}></ReadContent>;
    } else if (this.state.mode === "read") {
      var _content = this.getReadContent();
      _article = (
        <ReadContent
          title={_content._title}
          desc={_content._desc}
        ></ReadContent>
      );
    } else if (this.state.mode === "create") {
      _article = (
        <CreateContent
          onSubmit={function (_title, _desc) {
            this.max_content_id = this.max_content_id + 1;
            var _content = Array.from(this.state.content);
            _content.push({
              id: this.max_content_id,
              title: _title,
              desc: _desc,
            });

            this.setState({
              content: _content,
              mode: "read",
              selected_content_id: this.max_content_id,
            });
            console.log(_title, _desc);
          }.bind(this)}
        ></CreateContent>
      );
    } else if (this.state.mode === "update") {
      var _content = this.getReadContent();
      _article = (
        <UpdateContent
          data={_content}
          onSubmit={function (_id, _title, _desc) {
            var _content = Array.from(this.state.content);
            var i = 0;
            while (i < _content.length) {
              if (_content[i].id === _id) {
                _content[i] = { id: _id, title: _title, desc: _desc };
                break;
              }
              i = i + 1;
            }

            this.setState({
              content: _content,
              mode: "read",
            });
          }.bind(this)}
        ></UpdateContent>
      );
    }
    return _article;
  }

  render() {
    console.log("App render");

    return (
      <div className="App">
        <Subject
          title={this.state.subject.title}
          sub={this.state.subject.sub}
          onChangePage={function () {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "welcome" });
          }.bind(this)}
        ></Subject>
        <TOC
          data={this.state.content}
          onChangePage={function (id) {
            // í•¨ìˆ˜ì˜ ë‚´ìš© ì…ë ¥
            this.setState({ mode: "read", selected_content_id: Number(id) });
          }.bind(this)}
        ></TOC>
        <Control
          onChangeMode={function (_mode) {
            this.setState({ mode: _mode });
          }.bind(this)}
        ></Control>
        {this.getContent()}
      </div>
    );
  }
}

export default App;

```

```jsx
import React, { Component } from "react";

class UpdateContent extends Component {
  constructor(props) {
    super(props);
    this.state = {
      title: this.props.data.title,
      desc: this.props.data.desc,
    };
    this.inputFormHandler = this.inputFormHandler.bind(this);
  }
  inputFormHandler(e) {
    this.setState({ [e.target.name]: e.target.value });
  }
  render() {
    console.log("Content render");
    return (
      <article>
        <h2>Update</h2>
        <form
          action="/create_process"
          method="post"
          onSubmit={function (e) {
            e.preventDefault();
            this.props.onSubmit(function (e) {
              e.preventDefault();
              this.props.onSubmit(
                this.state.id,
                this.state.title,
                this.state.desc
              );
            });
            alert("submit");
          }.bind(this)}
        >
          <input type="hidden" name="id" value={this.state.id}></input>
          <p>
            <input
              type="text"
              name="title"
              placeholder="title"
              value={this.state.title}
              onChange={this.inputFormHandler}
            ></input>
          </p>
          <p>
            <textarea
              name="desc"
              placeholder="description"
              value={this.state.desc}
              onChange={this.inputFormHandler}
            ></textarea>
          </p>
          <p>
            <input type="submit"></input>
          </p>
        </form>
      </article>
    );
  }
}
export default UpdateContent;

```

## Delete ê¸°ëŠ¥ êµ¬í˜„

```jsx
<Control
  onChangeMode={function (_mode) {
    if (_mode === "delete") {
      if (window.confirm("really?")) {
        var _content = Array.from(this.state.content);
        var i = 0;
        while (i < _content.length) {
          if (_content[i].id === this.state.selected_content_id) {
            _content.splice(i, 1);
            break;
          }
          i = i + 1;
        }
        this.setState({ mode: "welcome", content: _content });
        alert("deleted!");
      }
    } else {
      this.setState({ mode: _mode });
    }
  }.bind(this)}
></Control>
```

```jsx
import React, { Component } from "react";

class Content extends Component {
  render() {
    console.log("Content render");
    return (
      <ul>
        <li>
          <a
            href="/create"
            onClick={function (e) {
              e.preventDefault();
              this.props.onChangeMode("create");
            }.bind(this)}
          >
            create
          </a>
        </li>
        <li>
          <a
            href="/update"
            onClick={function (e) {
              e.preventDefault();
              this.props.onChangeMode("update");
            }.bind(this)}
          >
            update
          </a>
        </li>
        <li>
          <input
            onClick={function (e) {
              e.preventDefault();
              this.props.onChangeMode("delete");
            }.bind(this)}
            type="button"
            value="delete"
          ></input>
        </li>
      </ul>
    );
  }
}
export default Content;

```